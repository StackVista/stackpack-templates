- _type: Monitor
  function: {{ get "urn:stackpack:common:monitor-function:threshold" }}
  arguments:
    comparator: LTE
    failureState: DEVIATING
    metric:
      aliasTemplate: Node Memory Pressure OK
      query: kubernetes_state_node_by_condition{condition="MemoryPressure"}
      unit: short
    threshold: 0.0
    urnTemplate: urn:kubernetes:/${cluster_name}:node/${node}
  description: |-
    Node memory pressure occurs when memory resources on a Kubernetes node are excessively strained, typically due to misconfigured resource requests/limits for containers or memory-intensive applications. This can lead to performance issues and requires proper resource allocation, monitoring of memory usage, and adjustment of container resource configurations to maintain optimal node performance.
  identifier: urn:stackpack:<< .Name >>:shared:monitor:<< .Name >>:node-memory-pressure
  intervalSeconds: 30
  name: Node Memory Pressure (Custom)
  remediationHint: "{{ include "./remediation-hints/node-memory-pressure.md.hbs" "identity" }}"
  status: ENABLED
  tags:
  - nodes
  - pressure
